# TankMatch 仕様書（操作・ルール・アイテム）

本書は TankMatch の操作方法、ルール、アイテム仕様をまとめたものです。実装・UX・バランス調整の共通基準として使用します。

## 1. 用語
- **ユニット**: プレイヤーが操作するタンク。
- **ターン**: 行動単位。プレイヤーは自分のターンに行動を消費する。
- **行動カウント(AP)**: ターン内で使用できる行動ポイント。
- **AIM**: 狙いを付ける操作。射撃方向と弾道に関係する。
- **視界**: ユニットが視認できる範囲。

## 2. 基本操作
### 2.1 移動
- 移動は **タイル/マス** 単位。
- 1 マス移動につき **AP を 1 消費**。
- 高低差のある地形は **登坂/降坂** 判定を行い、可否とコストが決まる。
  - 登坂は高さ差が一定以上の場合 **移動不可**。
  - 低い段差は **追加 AP** を消費する。
- 斜め移動は **2 方向分のコスト**（例: 斜め 1 マスは AP 2）。

### 2.2 行動カウント(AP)
- ターン開始時に AP が **最大値まで回復**。
- AP は **移動・攻撃・アイテム使用・AIM** に消費する。
- AP が 0 になった場合、ターンは終了する。

### 2.3 AIM（狙い）
- AIM は **射撃方向の固定** と **射角調整** を行う。
- AIM 中は **移動不可**。
- AIM 変更には **AP を 1 消費**。
- AIM の射角は **最小/最大角度** の範囲内に制限される。

### 2.4 攻撃
- 攻撃は **指定の武器** を選択して実行する。
- 攻撃は **AP を消費**。
- 攻撃後、再攻撃は AP が残っている場合のみ可能。
- 射撃は **弾道計算** により命中判定される（地形/障害物の遮蔽を考慮）。

## 3. カメラ
- カメラは **自軍ターン中** に操作可能。
- 基本は **アクティブユニット追従**。
- 手動操作で **移動・ズーム** が可能。
- AIM 中は **狙い方向を中心** に画面が追従する。

## 4. ルール
### 4.1 個人戦
- 全員が敵。
- 最後に生存したプレイヤーが勝利。

### 4.2 チーム戦
- 同じチームのユニットは **相互に攻撃不可**。
- チームの全滅で敗北。

### 4.3 勝利条件
- **個人戦**: 最後まで生存。
- **チーム戦**: 敵チーム全滅。

## 5. アイテム仕様
### 5.1 医療
- 使用対象: **自分または味方**。
- 効果: **HP を一定量回復**。
- 使用コスト: **AP 消費**。
- 使用後クールダウンあり。

### 5.2 ボム
- 使用対象: **指定範囲**。
- 効果: **爆発ダメージ** + 範囲内の地形破壊。
- 使用コスト: **AP 消費**。
- 爆発範囲内のユニットに **距離減衰ダメージ**。

### 5.3 ロープ
- 使用対象: **指定地点**。
- 効果: ターゲット地点へ **ユニットを移動**。
- 使用コスト: **AP 消費**。
- ロープ移動は **地形障害物を無視**。

### 5.4 スモーク
- 使用対象: **指定範囲**。
- 効果: 視界を遮断する **スモークエリア** を生成。
- スモーク内のユニットは **視認不可**（敵からのロック/命中率低下）。
- 使用コスト: **AP 消費**。

## 6. 行動フロー（例）
1. ターン開始 → AP 回復
2. 移動 → AIM → 攻撃 → アイテム使用
3. AP が 0 になるか終了操作でターン終了

## 7. UI 表示要件
- **AP 残量** を常時表示。
- AIM 中は **射角・射程** を可視化。
- スモーク範囲は **半透明表示**。
- 医療・ボム・ロープの **射程/対象範囲** を事前表示。

## 8. 例外・補足
- 地形破壊による **落下ダメージ** が発生する。
- 視界外の敵は **ターゲット不可**。
- チーム戦は **味方位置情報を常時表示**。
